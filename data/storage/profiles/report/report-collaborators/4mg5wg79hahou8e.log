{"type":"operationStart","subtype":"profile","data":{"_id":"1TTb9e6m38ojfbMW","timestamp":"2025-07-22T14:23:27.187Z","state":"queued","mode":"standard","creationDate":"2025-07-22T14:23:27.188Z","modificationDate":"2025-07-22T14:23:27.188Z","shortid":"uy_3TVQ","$entitySet":"profiles"},"doDiffs":false,"timestamp":1753194207187,"id":"yjiu4nye0r9kqzx","previousOperationId":null,"operationId":"z820sv0efumna98"}
{"type":"log","level":"info","message":"Render request 15 queued for execution and waiting for available worker","previousOperationId":"z820sv0efumna98","timestamp":1753194207187,"id":"ji4mfbyfxoiudqd"}
{"type":"operationStart","subtype":"render","name":"report-collaborators","previousOperationId":"z820sv0efumna98","timestamp":1753194207204,"id":"alpazj1uibfwu7k","previousEventId":"yjiu4nye0r9kqzx","operationId":"w5f3frs8elj75l9"}
{"type":"log","timestamp":1753194207204,"level":"info","message":"Starting rendering request 15","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"xgia7wrzdmr5wu6","previousOperationId":"w5f3frs8elj75l9"}
{"type":"log","timestamp":1753194207204,"level":"info","message":"Rendering template { name: report-collaborators, recipe: chrome-pdf, engine: jsrender, preview: true }","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"ttcihqysx6ospqp","previousOperationId":"w5f3frs8elj75l9"}
{"type":"log","timestamp":1753194207205,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"ixe2fgavq107ya9","previousOperationId":"w5f3frs8elj75l9"}
{"type":"log","timestamp":1753194207205,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"kr1n992bpmif9y8","previousOperationId":"w5f3frs8elj75l9"}
{"type":"operationStart","subtype":"engine","name":"jsrender","timestamp":1753194207205,"id":"vv94pcx03bvq4l0","previousEventId":"alpazj1uibfwu7k","operationId":"n12yly5zy3n2dzj","previousOperationId":"w5f3frs8elj75l9"}
{"type":"log","timestamp":1753194207205,"level":"debug","message":"Rendering engine jsrender","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"j6hrnfwtkrrq0rn","previousOperationId":"n12yly5zy3n2dzj"}
{"type":"log","timestamp":1753194207211,"level":"warn","message":"Error when processing render request 15\n(because) error when evaluating engine jsrender for template /report/report-collaborators\n(because) cannot read properties of undefined (reading 'company')\n\n(sandbox.js line 13:18)\nTypeError: Cannot read properties of undefined (reading 'company')\n  at Function.anonymous [as fn] (eval at <anonymous> (eval at makeEvaluate (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/ses/index.js:7936:27)), <anonymous>:5:18)\n  at Function.renderContent [as render] (/home/thiago/Documentos/Playback/jsreportapp/node_modules/jsrender/jsrender-node.js:1671:20)\n  at Object.execute (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-jsrender/lib/jsrenderEngine.js:26:29)\n  at executionFn (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:273:42)\n  at eval (sandbox.js:13:18)\n  at async run (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:132:18)\n  at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:214:14)\n  at async executeEngine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:354:16)\n  at async engine.engine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:162:14)\n  at async invokeRender (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:61:23)\n  at async WorkerReporter._render (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:148:7)\n  at async /home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/reporter.js:233:24\n  at async processAndResponse (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/advanced-workers/lib/workerHandler.js:42:17)\nwrapped by:\nError: Error when evaluating engine jsrender for template /report/report-collaborators\n(because) cannot read properties of undefined (reading 'company')\n  at module.exports (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/shared/createError.js:10:13)\n  at WorkerReporter.createError (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/shared/reporter.js:53:12)\n  at executeEngine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:377:35)\n  at async engine.engine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:162:14)\n  at async invokeRender (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:61:23)\n  at async WorkerReporter._render (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:148:7)\n  at async /home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/reporter.js:233:24\n  at async processAndResponse (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/advanced-workers/lib/workerHandler.js:42:17)","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"xaudz7tp8r5thxk","previousOperationId":"n12yly5zy3n2dzj"}
{"type":"log","timestamp":1753194207211,"level":"warn","message":"Rendering request 15 finished with error in 25 ms","meta":{"rootId":"4mg5wg79hahou8e","id":"4mg5wg79hahou8e"},"id":"pfrkht2lsx0cqut","previousOperationId":"n12yly5zy3n2dzj"}
{"type":"error","timestamp":1753194207212,"entity":{"shortid":"_TWx01KcK","name":"report-collaborators","content":"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>Royalty Self-Billing Invoice</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      margin: 0;\n      padding: 20px;\n      color: #333;\n      font-size: 12px;\n    }\n    .invoice-container {\n      max-width: 800px;\n      margin: 0 auto;\n    }\n    h1 {\n      font-size: 18px;\n      text-align: center;\n      margin-bottom: 30px;\n    }\n    table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-bottom: 20px;\n    }\n    table, th, td {\n      border: 1px solid #ddd;\n    }\n    th, td {\n      padding: 8px;\n      text-align: left;\n    }\n    th {\n      background-color: #f2f2f2;\n    }\n    .text-right {\n      text-align: right;\n    }\n    .text-center {\n      text-align: center;\n    }\n    .text-bold {\n      font-weight: bold;\n    }\n    .footer {\n      margin-top: 30px;\n      font-size: 10px;\n    }\n    .page-break {\n      page-break-after: always;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"invoice-container\">\n    <h1>Royalty Self-Billing Invoice Provided by Playback</h1>\n    \n    <table>\n      <tr>\n        <th colspan=\"2\">Issuer</th>\n      </tr>\n      <tr>\n        <td>Company</td>\n        <td>{{:issuer.company}}</td>\n      </tr>\n      <tr>\n        <td>CVR</td>\n        <td>{{:issuer.cvr}}</td>\n      </tr>\n      <tr>\n        <td>Address</td>\n        <td>{{:issuer.address}}</td>\n      </tr>\n      <tr>\n        <td>Email</td>\n        <td>{{:issuer.email}}</td>\n      </tr>\n    </table>\n    \n    <p class=\"text-bold\">On behalf of</p>\n    \n    <table>\n      <tr>\n        <td>Company</td>\n        <td>{{:onBehalfOf.company}}</td>\n      </tr>\n      <tr>\n        <td>CVR</td>\n        <td>{{:onBehalfOf.cvr}}</td>\n      </tr>\n    </table>\n    \n    <p class=\"text-bold\">Recipient</p>\n    \n    <table>\n      <tr>\n        <td>Name</td>\n        <td>{{:recipient.name}}</td>\n      </tr>\n      <tr>\n        <td>Account Number</td>\n        <td>{{:recipient.accountNumber}}</td>\n      </tr>\n      <tr>\n        <td>CVR/CPR Number</td>\n        <td>{{:recipient.cvrCprNumber}}</td>\n      </tr>\n      <tr>\n        <td>VAT Number</td>\n        <td>{{:recipient.vatNumber}}</td>\n      </tr>\n      <tr>\n        <td>VAT Registered</td>\n        <td>{{:recipient.vatRegistered}}</td>\n      </tr>\n    </table>\n    \n    <p class=\"text-bold\">Self-billing Invoice Details</p>\n    \n    <table>\n      <tr>\n        <td>Invoice Number</td>\n        <td>{{:invoiceNumber}}</td>\n      </tr>\n      <tr>\n        <td>Invoice Date</td>\n        <td>{{:invoiceDate}}</td>\n      </tr>\n      <tr>\n        <td>Period covered</td>\n        <td>{{:periodCovered}}</td>\n      </tr>\n      <tr>\n        <td>Currency</td>\n        <td>{{:currency}}</td>\n      </tr>\n    </table>\n    \n    <hr>\n    \n    <p class=\"text-bold\">Total allocation to</p>\n    <p class=\"text-bold\">Period</p>\n    <p class=\"text-bold\">Total Amount (excl. VAT)</p>\n  </div>\n  \n  <div class=\"page-break\"></div>\n  \n  <div class=\"invoice-container\">\n    <table>\n      <tr>\n        <td>Net Royalty</td>\n        <td>{{:periodCovered}}</td>\n        <td class=\"text-right\">{{:netRoyalty}}</td>\n      </tr>\n      <tr>\n        <td>For allocation to with this report</td>\n        <td></td>\n        <td class=\"text-right\">{{:allocationAmount}}</td>\n      </tr>\n      <tr>\n        <td>VAT balance</td>\n        <td></td>\n        <td class=\"text-right\">{{:vatBalance}}</td>\n      </tr>\n      <tr class=\"text-bold\">\n        <td>Net payable</td>\n        <td></td>\n        <td class=\"text-right\">{{:netPayable}}</td>\n      </tr>\n    </table>\n    \n    <div class=\"footer\">\n      <p>This report serves as a self-billing document prepared by Playback ApS. It can be used as documentation for accounting and tax reporting purposes. Please contact us if you have any questions.</p>\n    </div>\n  </div>\n</body>\n</html>"},"property":"helpers","statusCode":400,"weak":true,"logged":true,"previousOperationId":"n12yly5zy3n2dzj","id":"a8ar6bavhzs6ris","stack":"TypeError: Cannot read properties of undefined (reading 'company')\n  at Function.anonymous [as fn] (eval at <anonymous> (eval at makeEvaluate (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/ses/index.js:7936:27)), <anonymous>:5:18)\n  at Function.renderContent [as render] (/home/thiago/Documentos/Playback/jsreportapp/node_modules/jsrender/jsrender-node.js:1671:20)\n  at Object.execute (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-jsrender/lib/jsrenderEngine.js:26:29)\n  at executionFn (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:273:42)\n  at eval (sandbox.js:13:18)\n  at async run (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:132:18)\n  at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:214:14)\n  at async executeEngine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:354:16)\n  at async engine.engine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:162:14)\n  at async invokeRender (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:61:23)\n  at async WorkerReporter._render (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:148:7)\n  at async /home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/reporter.js:233:24\n  at async processAndResponse (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/advanced-workers/lib/workerHandler.js:42:17)\nwrapped by:\nError: Error when evaluating engine jsrender for template /report/report-collaborators\n(because) cannot read properties of undefined (reading 'company')\n  at module.exports (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/shared/createError.js:10:13)\n  at WorkerReporter.createError (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/shared/reporter.js:53:12)\n  at executeEngine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:377:35)\n  at async engine.engine (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/executeEngine.js:162:14)\n  at async invokeRender (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:61:23)\n  at async WorkerReporter._render (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:148:7)\n  at async /home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/reporter.js:233:24\n  at async processAndResponse (/home/thiago/Documentos/Playback/jsreportapp/node_modules/@jsreport/advanced-workers/lib/workerHandler.js:42:17)","message":"Error when evaluating engine jsrender for template /report/report-collaborators\n(because) cannot read properties of undefined (reading 'company')\n\n(sandbox.js line 13:18)"}
